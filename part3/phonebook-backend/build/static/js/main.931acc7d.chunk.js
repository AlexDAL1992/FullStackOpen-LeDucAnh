(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(15),a=t.n(r),o=(t(6),t(3)),s=(t(20),t(0)),i=function(e){return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Add a new contact"}),Object(s.jsxs)("form",{onSubmit:e.addPerson,children:[Object(s.jsxs)("div",{children:["Name:"," ",Object(s.jsx)("input",{onChange:e.handleNameChange,value:e.newName})]}),Object(s.jsxs)("div",{children:["Number:"," ",Object(s.jsx)("input",{onChange:e.handleNumberChange,value:e.newNumber})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"Add"})})]})]})},u=function(e){var n=e.handleFilterChange,t=e.filter;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Filter"}),"Filter shown with ",Object(s.jsx)("input",{onChange:n,value:t})]})},l=function(e){var n=e.persons,t=e.filter,c=e.deleteAPerson,r=e.setPersons;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)("ul",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())||""===t})).map((function(e){return Object(s.jsxs)("li",{children:[e.name," ",e.number,Object(s.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(e.name," ?"))&&(c(e.id),r(n.filter((function(n){return n.id!==e.id}))))},children:"Delete"})]},e.id)}))})]})},d=t(4),j=t.n(d),b="/api/persons",h={getAllPersons:function(){return j.a.get(b).then((function(e){return e.data}))},createNewPerson:function(e){return j.a.post(b,e).then((function(e){return e.data}))},deleteAPerson:function(e){return j.a.delete("".concat(b,"/").concat(e))},changePersonNumber:function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))}},f=function(e){var n=e.message,t=e.type;return null===n?null:Object(s.jsx)("div",{className:t,children:n})},m=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),d=Object(o.a)(a,2),j=d[0],b=d[1],m=Object(c.useState)(""),O=Object(o.a)(m,2),p=O[0],g=O[1],x=Object(c.useState)(""),v=Object(o.a)(x,2),w=v[0],N=v[1],P=Object(c.useState)({message:null,type:null}),y=Object(o.a)(P,2),C=y[0],S=y[1];Object(c.useEffect)((function(){h.getAllPersons().then((function(e){return r(e)}))}),[]);var A=function(e,n){S({message:e,type:n}),setTimeout((function(){S({message:null,type:null})}),5e3)};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Phonebook"}),Object(s.jsx)(f,{message:C.message,type:C.type}),Object(s.jsx)(u,{handleFilterChange:function(e){N(e.target.value)},filter:w}),Object(s.jsx)(i,{handleNameChange:function(e){b(e.target.value)},handleNumberChange:function(e){g(e.target.value)},addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===j}));if(void 0===n)h.createNewPerson({name:j,number:p}).then((function(e){r(t.concat(e)),b(""),g(""),A("Added ".concat(j),"successStyle")})).catch((function(e){A("".concat(e.response.data.error),"errorStyle")}));else if(window.confirm("".concat(j," is already added to phonebook, replace the number with the new one?"))){var c={id:n.id,name:n.name,number:p};h.changePersonNumber(n.id,c).then((function(e){r(t.map((function(t){return t.id!==n.id?t:e.data}))),A("Number of ".concat(c.name," changed successfully"),"successStyle")})).catch((function(e){console.log(e),A("Person ".concat(c.name," not found!"),"errorStyle"),r(t.filter((function(e){return e.id!==n.id})))}))}},newName:j,newNumber:p}),Object(s.jsx)(l,{persons:t,filter:w,deleteAPerson:h.deleteAPerson,setPersons:r})]})};a.a.render(Object(s.jsx)(m,{}),document.getElementById("root"))},6:function(e,n,t){}},[[40,1,2]]]);
//# sourceMappingURL=main.931acc7d.chunk.js.map